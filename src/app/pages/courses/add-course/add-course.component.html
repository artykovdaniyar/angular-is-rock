<section class="course-form">
  <div class="container">
    <div class="card">
      <loading *ngIf="loading$ | async"></loading>
      <course-error *ngIf="error$ | async"></course-error>
      <loading *ngIf="loading$ | async"></loading>
      <h2 class="title">Add course</h2>
      <form class="form" [formGroup]="form" (ngSubmit)="onSubmit()">
        <course-title></course-title>
        <course-description></course-description>
        <course-date formControlName="date"></course-date>
        <course-duration formControlName="length"></course-duration>

        <fieldset class="form-group">
          <course-authors
            [error]="(error$ | async)!"
            [allAuthors$]="allAuthors$"
            [isLoading]="(loading$ | async)!"
            (onAddAuthor)="updateAuthorsHandler($event)"
            (onDeleteAuthor)="updateAuthorsHandler($event)"
          ></course-authors>
        </fieldset>

        <fieldset class="form-group btns">
          <button class="btn btn-save" type="submit" [disabled]="form.invalid">
            Save
          </button>
          <button
            class="btn btn-cancel"
            type="button"
            (click)="goToCoursesPage()"
          >
            Cancel
          </button>
        </fieldset>
      </form>
    </div>
  </div>
</section>
